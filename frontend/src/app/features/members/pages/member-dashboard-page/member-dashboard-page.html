<div class="grid">
  <section class="card fade-in">
    <h1>Member Dashboard</h1>
    <p *ngIf="isApproved; else pendingCopy">
      Enterprise overview of requests, bids, revenue, and compliance.
    </p>
    <ng-template #pendingCopy>
      <p>Your account is pending approval. You may browse but cannot submit requests yet.</p>
    </ng-template>
  </section>

  <section class="grid cols-3">
    <div class="card">
      <h3>Post Request</h3>
      <p>Create a listing for verified suppliers to bid on.</p>
      <ng-container *ngIf="isApproved; else createDisabled">
        <a class="btn primary" routerLink="/member/requests/new">Publish</a>
      </ng-container>
      <ng-template #createDisabled>
        <button class="btn primary" disabled>Publish (Pending Approval)</button>
      </ng-template>
    </div>
    <div class="card">
      <h3>Bids</h3>
      <p>Compare supplier proposals and select a winner.</p>
      <a class="btn" routerLink="/member/requests">Open</a>
    </div>
    <div class="card">
      <h3>Transactions</h3>
      <p>Manage secure payouts via TAPSOSA escrow.</p>
      <a class="btn" routerLink="/member/transactions">View</a>
    </div>
  </section>

  <section class="grid cols-4">
    <div class="card fade-in">
      <h3>Active Requests</h3>
      <p class="metric-big">{{ activeJobs }}</p>
      <a class="link" routerLink="/member/requests">View Requests</a>
    </div>
    <div class="card fade-in">
      <h3>Pending Bids</h3>
      <p class="metric-big">{{ bidsCount }}</p>
      <a class="link" routerLink="/member/requests">Review Bids</a>
    </div>
    <div class="card fade-in">
      <h3>Revenue Summary</h3>
      <p class="metric-big">R{{ releasedNet.toLocaleString() }}</p>
      <a class="link" routerLink="/member/transactions">View Finance</a>
    </div>
    <div class="card fade-in">
      <h3>Compliance Alerts</h3>
      <p class="metric-big">{{ complianceAlerts }}</p>
      <a class="link" routerLink="/member/reports">View Compliance</a>
    </div>
  </section>

  <section class="card">
    <h3>Escrow Overview</h3>
    <div class="escrows">
      <div class="row">
        <div>Pending Escrows ({{ pendingCount }})</div>
        <div>R{{ pendingGross.toLocaleString() }}</div>
      </div>
      <div class="row">
        <div>Funded Escrows ({{ fundedCount }})</div>
        <div>R{{ fundedGross.toLocaleString() }}</div>
      </div>
      <div class="row">
        <div>Released Payouts ({{ releasedCount }})</div>
        <div>R{{ releasedNet.toLocaleString() }}</div>
      </div>
    </div>
  </section>
</div>
