<div class="grid">
  <section class="card">
    <h1>Member Dashboard</h1>
    <p>Overview of active jobs, bids, and escrow.</p>
  </section>

  <section class="metrics">
    <div class="metric">
      <div class="value">{{ activeJobs }}</div>
      <div class="label">Active Jobs</div>
    </div>
    <div class="metric">
      <div class="value">{{ bidsCount }}</div>
      <div class="label">Pending Bids</div>
    </div>
    <div class="metric">
      <div class="value">R{{ releasedNet.toLocaleString() }}</div>
      <div class="label">Total Spent</div>
    </div>
  </section>

  <section class="grid cols-3">
    <div class="card">
      <h3>Post New Job</h3>
      <p>Create a listing for verified suppliers to bid on.</p>
      <a class="btn primary" routerLink="/member/requests/new">Publish Job</a>
    </div>
    <div class="card">
      <h3>View Bids</h3>
      <p>Compare supplier proposals and select a winner.</p>
      <a class="btn" routerLink="/member/requests">View Details</a>
    </div>
    <div class="card">
      <h3>Payments & Escrow</h3>
      <p>Manage secure payouts via TAPSOSA escrow.</p>
      <a class="btn" routerLink="/member/transactions">Open Escrow</a>
    </div>
  </section>

  <section class="card">
    <h3>Job History</h3>
    <p>Completed engagements and audit trail.</p>
    <a class="link" routerLink="/member/transactions">View Completed Jobs</a>
  </section>

  <section class="card">
    <h3>Escrow Overview</h3>
    <div class="escrows">
      <div class="row">
        <div>Pending Escrows ({{ pendingCount }})</div>
        <div>R{{ pendingGross.toLocaleString() }}</div>
      </div>
      <div class="row">
        <div>Funded Escrows ({{ fundedCount }})</div>
        <div>R{{ fundedGross.toLocaleString() }}</div>
      </div>
      <div class="row">
        <div>Released Payouts ({{ releasedCount }})</div>
        <div>R{{ releasedNet.toLocaleString() }}</div>
      </div>
    </div>
  </section>

  <section class="card">
    <h3>Notifications</h3>
    <div class="activities">
      <div class="item" *ngFor="let a of recentActivities">
        <div class="title">{{ a.label }} â€¢ {{ a.jobTitle }}</div>
        <div class="meta" *ngIf="a.amount !== null">R{{ a.amount!.toLocaleString() }}</div>
        <div class="when">{{ a.when }}</div>
      </div>
      <div class="muted" *ngIf="recentActivities.length === 0">No recent activity</div>
    </div>
    <a class="link" routerLink="/member/notifications">View all notifications</a>
  </section>
</div>
