<div class="grid">
  <section class="card">
    <h1>Supplier Dashboard</h1>
    <p>Find jobs, submit bids, and track earnings.</p>
  </section>

  <section class="metrics">
    <div class="metric">
      <div class="value">{{ jobs.length }}</div>
      <div class="label">Available Jobs</div>
    </div>
    <div class="metric">
      <div class="value">{{ activeBidsCount }}</div>
      <div class="label">Active Bids</div>
    </div>
    <div class="metric">
      <div class="value">R{{ pendingPayouts.toLocaleString() }}</div>
      <div class="label">Pending Payouts</div>
    </div>
  </section>

  <section class="grid cols-3">
    <div class="card">
      <h3>Browse Jobs</h3>
      <p>Search and filter member requests.</p>
      <a class="btn primary" routerLink="/supplier/jobs">Open Jobs</a>
    </div>
    <div class="card">
      <h3>Compliance</h3>
      <p>Maintain verification documents.</p>
      <a class="btn" routerLink="/supplier/compliance">Update Docs</a>
    </div>
    <div class="card">
      <h3>Earnings</h3>
      <p>Track payouts and UKHUSELO SUPPLIER PORTAL fees.</p>
      <a class="btn" routerLink="/supplier/earnings">View Earnings</a>
    </div>
  </section>

  <section class="grid cols-2">
    <div class="card">
      <h3>Performance Score</h3>
      <div class="metric big">
        <div class="value">{{ performanceScore }}%</div>
        <div class="label">Win rate estimate</div>
      </div>
      <div class="row">
        <div>Won Contracts</div>
        <div>{{ wonContractsCount }}</div>
      </div>
      <div class="row">
        <div>Total Bids</div>
        <div>{{ activeBidsCount }}</div>
      </div>
    </div>
    <div class="card">
      <h3>Quick Actions</h3>
      <div class="actions">
        <a class="btn" routerLink="/supplier/jobs">Browse Jobs</a>
        <a class="btn" routerLink="/supplier/bids">View My Bids</a>
        <a class="btn" routerLink="/supplier/contracts">Active Contracts</a>
      </div>
    </div>
  </section>

  <section class="card">
    <h3>Escrow Summary</h3>
    <div class="escrows">
      <div class="row">
        <div>Funded ({{ fundedCount }})</div>
        <div>R{{ pendingPayouts.toLocaleString() }}</div>
      </div>
      <div class="row">
        <div>Released ({{ releasedCount }})</div>
        <div>R{{ releasedPayouts.toLocaleString() }}</div>
      </div>
    </div>
  </section>

  <section class="card">
    <h3>Notifications</h3>
    <div class="activities">
      <div class="item" *ngFor="let a of recentActivities">
        <div class="title">{{ a.label }} • {{ a.jobTitle }}</div>
        <div class="meta" *ngIf="a.amount !== null">R{{ a.amount!.toLocaleString() }}</div>
        <div class="when">{{ a.when }}</div>
      </div>
      <div class="muted" *ngIf="recentActivities.length === 0">No recent activity</div>
    </div>
  </section>

  <section class="card">
    <h3>Available Jobs</h3>
    <div class="jobs">
      <article class="job" *ngFor="let j of jobs | slice:0:5">
        <div class="title">{{ j.title }} • {{ j.location }}</div>
        <div class="meta">Budget R{{ j.minBudget.toLocaleString() }} – R{{ j.maxBudget.toLocaleString() }} • {{ j.bidDeadline }}</div>
        <a class="btn" [routerLink]="['/supplier/jobs', j.id]">View & Bid</a>
      </article>
    </div>
  </section>
</div>
