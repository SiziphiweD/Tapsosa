<section class="card">
  <h1>Browse Jobs</h1>
  <p>Search and filter active member requests to bid on.</p>

  <div class="filters">
    <label>
      Category
      <select name="category" [(ngModel)]="filters.category">
        <option>All</option>
        <option>Uniforms &amp; PPE</option>
        <option>SIM Cards &amp; Connectivity</option>
        <option>Access Control Systems</option>
        <option>Patrol Monitoring Systems</option>
        <option>Two-Way Radios</option>
        <option>Financial Assistance &amp; Asset Finance</option>
        <option>Insurance Solutions</option>
      </select>
    </label>
    <label>
      Location
      <input name="location" [(ngModel)]="filters.location" type="text" placeholder="e.g. Johannesburg, Gauteng" />
    </label>
    <label>
      Min Budget
      <input name="minBudget" [(ngModel)]="filters.minBudget" type="number" placeholder="e.g. 10000" />
    </label>
    <label>
      Max Budget
      <input name="maxBudget" [(ngModel)]="filters.maxBudget" type="number" placeholder="e.g. 40000" />
    </label>
    <label>
      Deadline
      <input name="deadline" [(ngModel)]="filters.deadline" type="date" />
    </label>
    <label>
      Search
      <input name="search" [(ngModel)]="filters.search" type="text" placeholder="Search title, category, location" />
    </label>
    <label>
      Sort
      <select name="sortBy" [(ngModel)]="filters.sortBy">
        <option>Urgency</option>
        <option>Budget (High→Low)</option>
        <option>Budget (Low→High)</option>
        <option>Title (A–Z)</option>
      </select>
    </label>
    <div class="links">
      <a class="link" routerLink="/supplier/jobs/recommended">Recommended</a>
      <a class="link" routerLink="/supplier/jobs/saved">Saved</a>
      <a class="link" routerLink="/supplier/jobs/alerts">Job Alerts</a>
    </div>
  </div>

  <div class="filters-actions">
    <button type="button" (click)="resetFilters()">Clear filters</button>
  </div>

  <div class="grid cols-3">
    <div class="card job-card" *ngFor="let j of filtered">
      <div class="head">
        <h3>{{ j.title }}</h3>
        <span class="badge verified" *ngIf="j.verified">Verified</span>
      </div>
      <p>{{ j.category }} • {{ j.location }} • Budget R{{ j.minBudget.toLocaleString() }} – R{{ j.maxBudget.toLocaleString() }}</p>
      <div class="meta">{{ daysLeft(j.bidDeadline) }} days left</div>
      <div class="actions">
        <button type="button" class="btn secondary" [class.saved]="isSaved(j)" (click)="toggleSave(j)">
          <ng-container *ngIf="isSaved(j); else saveLabel">Saved</ng-container>
          <ng-template #saveLabel>Save</ng-template>
        </button>
        <a class="btn primary" [routerLink]="['/supplier/jobs', j.id]">View &amp; Bid</a>
      </div>
    </div>
  </div>
</section>
